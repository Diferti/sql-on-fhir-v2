name: Basic FHIRPath examples
resources:
  - {resourceType: 'Patient', id: 'pt-1', birthDate: '1950-03-01', name: [{given: ['John', 'Johnatan']}]}
  - {resourceType: 'Patient', id: 'pt-2', birthDate: '1950-03-05', name: [{given: ['Jim']}]}
  - {resourceType: 'Patient', id: 'pt-3', name: [{given: ['Sam']}]}
  - {resourceType: 'Patient', id: 'pt-4'}
views:
  - title: Simple one level fhirpath
    desc: null values are not filtered out
    view:
      resourceType: Patient
      select:
        - {expr: 'id', name: 'id'}
        - {expr: 'birthDate', name: 'bod'}
    result:
      - ['pt-1','1950-03-01']
      - ['pt-2','1950-03-05']
      - ['pt-3', null]
      - ['pt-4', null]
  - title: Simple one level fhirpath
    desc: null values are not filtered out
    view:
      resourceType: Patient
      select:
        - {expr: 'id', name: 'id'}
        - {expr: 'name.given.first()', name: 'name'}
    result:
      - ['pt-1','John']
      - ['pt-2','Jim']
      - ['pt-3','Sam']
      - ['pt-4', nil]
  - title: Simple forEach
    desc: empty names are filtered out
    view:
      resourceType: Patient
      select:
        - {expr: 'id', name: 'id'}
        - forEach:
            select: [{expr: 'given'}]
    result:
      - ['pt-1','John']
      - ['pt-1','Johnatan']
      - ['pt-2','Sam']
  - desc: Simple forEachOrNull
    desc: empty names are not filtered out
    view:
      resourceType: Patient
      select:
        - {expr: 'id', name: 'id'}
        - forEach:
            select: [{expr: 'given'}]
    result:
      - ['pt-1','John']
      - ['pt-1','Johnatan']
      - ['pt-3','Sam']
      - ['pt-4', nil]
