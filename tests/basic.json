{
 "title": "basic",
 "description": "basic view definition",
 "resources": [
  {
   "resourceType": "Patient",
   "id": "pt1",
   "name": [
    {
     "family": "F1"
    }
   ],
   "active": true
  },
  {
   "resourceType": "Patient",
   "id": "pt2",
   "name": [
    {
     "family": "F2"
    }
   ],
   "active": false
  },
  {
   "resourceType": "Patient",
   "id": "pt3"
  }
 ],
 "tests": [
  {
   "title": "basic attribute",
   "view": {
    "resource": "Patient",
    "status": "active",
    "select": [
     {
      "column": [
       {
        "name": "id",
        "path": "id"
       }
      ]
     }
    ]
   },
   "expect": [
    {
     "id": "pt1"
    },
    {
     "id": "pt2"
    },
    {
     "id": "pt3"
    }
   ]
  },
  {
   "title": "boolean attribute with false",
   "view": {
    "resource": "Patient",
    "status": "active",
    "select": [
     {
      "column": [
       {
        "name": "id",
        "path": "id"
       },
       {
        "name": "active",
        "path": "active"
       }
      ]
     }
    ]
   },
   "expect": [
    {
     "id": "pt1",
     "active": true
    },
    {
     "id": "pt2",
     "active": false
    },
    {
     "id": "pt3",
     "active": null
    }
   ]
  },
  {
   "title": "two columns",
   "view": {
    "resource": "Patient",
    "status": "active",
    "select": [
     {
      "column": [
       {
        "name": "id",
        "path": "id"
       },
       {
        "name": "last_name",
        "path": "name.family.first()"
       }
      ]
     }
    ]
   },
   "expect": [
    {
     "id": "pt1",
     "last_name": "F1"
    },
    {
     "id": "pt2",
     "last_name": "F2"
    },
    {
     "id": "pt3",
     "last_name": null
    }
   ]
  },
  {
   "title": "two selects with columns",
   "view": {
    "resource": "Patient",
    "status": "active",
    "select": [
     {
      "column": [
       {
        "name": "id",
        "path": "id"
       }
      ]
     },
     {
      "column": [
       {
        "name": "last_name",
        "path": "name.family.first()"
       }
      ]
     }
    ]
   },
   "expect": [
    {
     "id": "pt1",
     "last_name": "F1"
    },
    {
     "id": "pt2",
     "last_name": "F2"
    },
    {
     "id": "pt3",
     "last_name": null
    }
   ]
  },
  {
   "title": "where - 1",
   "view": {
    "resource": "Patient",
    "status": "active",
    "select": [
     {
      "column": [
       {
        "name": "id",
        "path": "id"
       }
      ]
     }
    ],
    "where": [
     {
      "path": "active = true"
     }
    ]
   },
   "expect": [
    {
     "id": "pt1"
    }
   ]
  },
  {
   "title": "where - 2",
   "view": {
    "resource": "Patient",
    "status": "active",
    "select": [
     {
      "column": [
       {
        "name": "id",
        "path": "id"
       }
      ]
     }
    ],
    "where": [
     {
      "path": "active = false"
     }
    ]
   },
   "expect": [
    {
     "id": "pt2"
    }
   ]
  },
  {
   "title": "where as element",
   "view": {
    "resource": "Patient",
    "status": "active",
    "select": [
     {
      "column": [
       {
        "name": "id",
        "path": "id"
       }
      ]
     }
    ],
    "where": [
     {
      "path": "active"
     }
    ]
   },
   "expect": [
    {
     "id": "pt1"
    }
   ]
  },
  {
   "title": "where as expr - 1",
   "view": {
    "resource": "Patient",
    "status": "active",
    "select": [
     {
      "column": [
       {
        "name": "id",
        "path": "id"
       }
      ]
     }
    ],
    "where": [
     {
      "path": "name.family = 'F2'"
     }
    ]
   },
   "expect": [
    {
     "id": "pt2"
    }
   ]
  },
  {
   "title": "where as expr - 2",
   "view": {
    "resource": "Patient",
    "status": "active",
    "select": [
     {
      "column": [
       {
        "name": "id",
        "path": "id"
       }
      ]
     }
    ],
    "where": [
     {
      "path": "name.family = 'F1'"
     }
    ]
   },
   "expect": [
    {
     "id": "pt1"
    }
   ]
  }
 ]
}